<?xml version="1.0"?>
<launch>
    <include file="./launch_devices.launch" />

    <arg name="map_file" default="$(find chibi20_2)/mapdata/chibi20_2_dkan7.yaml"/>
    <node pkg="map_server" type="map_server" name="global_map"  args="$(arg map_file)"/>

    <node pkg="chibi20_2" type="global_path_planner" name="global_path_planner" output="screen"/>

    <node pkg="chibi20_2" type="map_maneger" name="map_maneger" output="screen"/>

    <node pkg="chibi20_2" type="localizer" name="localizer" output="screen">
        <rosparam file="$(find chibi20_2)/config/param/localizer.yaml" command="load" />
    </node>

    <node pkg="chibi20_2" type="local_goal_creator" name="local_goal_creator" output="screen"/>

    <node pkg="chibi20_2" type="local_map_creator" name="local_map_creator" output="screen"/>

    <node pkg="rosbag" type="record" name="rosbag_record" args="record -o /home/amsl/$(arg bagfile) /camera/aligned_depth_to_color/image_raw/compressed /camera/color/camera_info /camera/color/image_rect_color/compressed /theta_s/image_raw/compressed /roomba/odometry /scan" />

</launch>
