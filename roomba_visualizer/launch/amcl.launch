<?xml version="1.0"?>
<launch>
    <arg name="amcl_config" default="$(find roomba_visualizer)/config/amcl.yaml" />
    <arg name="roomba" default="roomba" />

    <node pkg="pole_eliminator" type="pole_eliminator_node" name="pole_eliminator" >
        <param name="LASER_FRAME_ID" value="$(arg roomba)/laser" />
    </node>
    <node pkg="multi_robots_tf" type="static_roomba_tf2_broadcaster" name="static_roomba_tf2_broadcaster" >
        <param name="base_link_frame_id" value="$(arg roomba)/base_link" />
        <param name="lidar_frame_id" value="$(arg roomba)/laser" />
        <param name="thetas_frame_id" value="$(arg roomba)/theta_s" />
        <param name="realsense_frame_id" value="$(arg roomba)/realsense" />
        <rosparam command="load" file="$(find multi_robots_tf)/config/static_roomba_tf.yaml" />
    </node>
    <node pkg="multi_robots_tf" type="roomba_tf2_broadcaster" name="roomba_tf2_broadcaster">
        <param name="odom_frame_id" value="$(arg roomba)/odom" />
        <param name="base_link_frame_id" value="$(arg roomba)/base_link" />
    </node>
    <node pkg="amcl" type="amcl" name="amcl" output="screen" >
        <rosparam command="load" file="$(arg amcl_config)" />
        <param name="base_frame_id" value="$(arg roomba)/base_link" />
        <param name="odom_frame_id" value="$(arg roomba)/odom" />
        <remap from="scan" to="corrected_scan" />
        <remap from="map" to="/map" />
    </node>
    <node pkg="roomba_visualizer" type="roomba_visualizer_node" name="roomba_visualizer" >
        <param name="ROOMBA" value="$(arg roomba)" />
    </node>
</launch>
